<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Forget Password</title>
		<link rel="stylesheet" type="text/css" href="{{asset('css/main.css')}}" />
		<script src="{{asset('js/jquery.min.js')}}"></script>
		<script src="{{asset('js/html5placeholder.jquery.js')}}"></script>
		<script src="{{asset('js/jquery.easing.1.3.js')}}"></script>
		<script type="text/javascript" src="{{asset('js/fancybox/jquery.fancybox-1.3.4.pack.js')}}"></script>
		<link rel="stylesheet" type="text/css" href="{{asset('css/jquery.fancybox-1.3.4.css')}}" media="screen" />
		<script type="text/javascript" src="{{asset('js/fancybox/jquery.easing-1.4.pack.js')}}"></script>
		<script>
			$(function() {
				$(':input[placeholder]').placeholder();
			});
		</script>
	</head>
	<body style=" background-color:#FFF; color:#423C3B;">
		<img src="{{asset('images/forget.png')}}" style="padding-top: 20px;" />
		<hr style=" width:98%; margin-left:-5px; margin-top:15px; margin-bottom:10px;" />
		<form action="{{path('TRWebBundle_chgconfirm')}}" method="post">
			<table style="padding-left:10px;">
				<tr height="40" valign="middle">
					<td align="left" width="600" style="font-size:24px;" colspan="3">ตั้งค่ารหัสผ่านใหม่ กรุณากรอกรหัสผ่านใหม่ และยืนยันรหัสผ่านใหม่ให้ตรงกัน</td>
				</tr>
				<tr height="20" valign="middle">
					<td align="left" width="180" style="font-size:24px;">&nbsp;</td>
					<td align="left" style="font-size:22px;" colspan="2"><font id="txterror" class="alertmsg" style="color:#BF1E2D;"></font></td>
				</tr>
				<tr height="50" valign="middle">
					<td align="left" width="180" style="font-size:24px;">รหัสผ่านใหม่ : *</td>
					<td align="left" width="120">
					<input id="newpass" name="newpass" type="password" maxlength="30" placeholder="กรอกรหัสผ่านใหม่" style=" padding:2px; font-size:20px;" />
					</td>
				</tr>
				<tr height="50" valign="middle">
					<td align="left" width="180" style="font-size:24px;">ยืนยันรหัสผ่านใหม่ : *</td>
					<td align="left" width="120">
					<input id="conpass" name="conpass" type="password" maxlength="30" placeholder="ยืนยันรหัสผ่านใหม่" style=" padding:2px; font-size:20px;" />
					</td>
				</tr>
				<tr height="50" valign="middle">
					<td align="left" width="180" style="font-size:24px;">&nbsp;</td>
					<td align="left" width="120">
					<input class="resetp" type="submit" value="" onclick="return chkpass();"/>
					</td>
				</tr>
			</table>
		</form>
		<script>
			function chkpass() {
				if ($('#newpass').val() == "") {
					$("font#txterror").html("กรุณากรอก รหัสผ่าน");
					$("font#txterror").hide();
					$("font#txterror").show("slow");
					document.getElementById('newpass').focus();
					return false;
				} else {
					if ($('#newpass').val().length < 8 || $('#newpass').val().length > 12) {
						$("font#txterror").html("รหัสผ่านต้องมีมากกว่า 8 ตัวและไม่เกิน 12 ตัว");
						$("font#txterror").hide();
						$("font#txterror").show("slow");
						document.getElementById('newpass').focus();
						return false;
					} else {
						var patt = /[a-z][0-9]/;
						//alert(patt.test($('#newpass').val()));return false;
						if (patt.test($('#newpass').val()) == false) {
							//alert("pattern working");
							$("font#txterror").html("รหัสผ่านต้องมีตัวอักษรและตัวเลข");
							$("font#txterror").hide();
							$("font#txterror").show("slow");
							document.getElementById('newpass').focus();
							return false;
						}
					}
				}

				if ($('#conpass').val() == "") {
					$("font#txterror").html("กรุณา ยืนยันรหัสผ่าน");
					$("font#txterror").hide();
					$("font#txterror").show("slow");
					document.getElementById('conpass').focus();
					return false;
				} else {
					if ($('#newpass').val() != $('#conpass').val()) {
						$("font#txterror").html("รหัสผ่านไม่ตรงกัน");
						$("font#txterror").hide();
						$("font#txterror").show("slow");
						document.getElementById('conpass').focus();
						return false;
					}
					parent.location.href = "{{path('FTRWebBundle_homepage')}}";
				}
			}
		</script>
	</body>
</html>
