{% extends 'FTRWebBundle:Layout:Layout.html.twig' %}
{% block body %}
{#แก้ไขห้องพัก#}
{#MICK#}
{#2013/03/22#}
<link rel="stylesheet" type="text/css" href="{{asset('js/uploadify/uploadify.css')}}">
<script type="text/javascript" src="{{asset('js/uploadify/jquery.uploadify-3.1.min.js')}}"></script>
<script type="text/javascript" src="{{asset('js/uploadify.control.js')}}"></script>
<script type="text/javascript" src="{{asset('js/sisyphus-autosave/sisyphus.js')}}"></script>
<script type="text/javascript" src="{{asset('js/gritter/js/jquery.gritter.js')}}"></script>
<link rel="stylesheet" type="text/css" href="{{asset('js/gritter/css/jquery.gritter.css')}}" />
<script type="text/javascript" src="http://www.google.com/jsapi"></script>

<script language="javascript">
    $(document).ready(function(){
        $("div#upload_map.uploadify").css("marginTop","-80px");
        var mybrowser=navigator.userAgent;
        if(mybrowser.indexOf('MSIE')>0){
            $("div#upload_map.uploadify").css("marginTop","-60px");
            $("#headimage2").css("marginTop","-60px");
        }
        if((navigator.userAgent.match(/Android/i)) ||
                (navigator.userAgent.match(/iPhone/i)) ||
                (navigator.userAgent.match(/iPod/i)) ||
                (navigator.userAgent.match(/iPad/i)))
        {
            document.getElementById('device').style.display='block';
            document.getElementById('fix').style.display='none';
            document.getElementById('datazone').style.display='none';
            document.getElementById('roomzone').style.display='none';
            document.getElementById('galleryzone').style.display='none';
            document.getElementById('etczone').style.display='none';
        }
    });
</script>

<script language="javascript">

var swfpath = "{{asset('js/uploadify/uploadify.swf')}}";
var uploaderpath = "{{asset('js/uploadify/uploadify.php')}}";

function loopbutton()
{
    uploadpicroom();
}

function loopbuttongallery()
{
    uploadpicgallery();
}

var intLine = {{roomlines}};
var arraydataimage =
        [
            {% for roomdata in rooms %}
            [{{roomdata.id}}, "{{asset(roomdata.link_photo)}}", '{{roomdata.roomtype_name}}', '{{roomdata.room_size}}', '{{roomdata.room_price}}',"{{roomdata.photo_name}}"],
            {% endfor %}
        ];

var nullarray = [-1, "{{asset('images/show.png')}}",'','','',''];
var pathimgdefault = "{{asset('images/')}}";
var pathimgbuilding = "{{asset('images/building')}}";

$(document).ready(function(){
    if(arraydataimage.length == 0)
    {
        CreateNewRow(nullarray, 0);
        arraydataimage = [nullarray];
    }
    else{
        genrowimage();
    }
});

function genrowimage()
{
    $("#tableroom").html('<tr height="40" valign="bottom">'+
            '<td align="left" colspan="4" style="font-size:24px;" width="500">ประเภทห้องพัก</td>'+
            '<td align="center" width="100">ขนาด</td>'+
            '<td width="100">&nbsp;</td>'+
            '<td align="center" width="150">อัตราค่าเช่า / เดือน</td>'+
            '<td width="60">&nbsp;</td>'+
            '</tr>');
    for(var i=0 ; i < arraydataimage.length ; i++)
    {
        CreateNewRow(arraydataimage[i], i);
    }
}

function CreateNewRow(arraydata, num)
{
    //var  parseInt(document.addform.hdnMaxLine.value);
    // intLine++;

    var imageid = arraydata[0];
    var pathimage = arraydata[1];
    var typename = arraydata[2];
    var roomsize = arraydata[3];
    var roomprice = arraydata[4];
    var nameimage = arraydata[5];

    //alert('test');
    var strInner = '<tr>' +
            '<td><img src="{{asset('images/delete.png')}}" style="padding-left:0px; margin-left:-10px; cursor:pointer;" onclick="RemoveRow('+num+','+imageid+');" /></td>' +
            '<td><div id="roompic'+num+'" class="thumbframe4add"><img src="'+pathimage+'" class="nopad thumb4img"</div></td>' +
            '<td><input type="file" name="room'+num+'" id="room'+num+'" /><input type="hidden" name="hdnfilename'+num+'" id="hdnfilename'+num+'" value="'+nameimage+'" onchange="postData('+"'"+"image"+"'"+');" /></td>' +
            '<td><input name="typeap_name'+num+'" id="typeap_name'+num+'" type="text" maxlength="30" placeholder="กรุณากรอกประเภทห้องพัก" value="'+typename+'" style=" padding:2px; font-size:20px;" onchange="postData('+"'"+"image"+"'"+');" /></td>' +
            '<td><input name="typeap_size'+num+'" id="typeap_size'+num+'" type="text" maxlength="10" placeholder="ขนาด" value="'+roomsize+'" style=" padding:2px; font-size:20px; width:80px;" onchange="postData('+"'"+"image"+"'"+');" /></td>' +
            '<td><LABEL align="left">ตารางเมตร</LABEL></td>' +
            '<td><input name="typeap_price'+num+'" id="typeap_price'+num+'" type="text" maxlength="10" placeholder="อัตราค่าเช่า" value="'+roomprice+'" style=" padding:2px; font-size:20px; width:80px;" onchange="postData('+"'"+"image"+"'"+');" /></td>' +
            '<td><LABEL align="left">บาท</LABEL><input type="hidden" name="imageid'+num+'" id="imageid'+num+'" value="'+imageid+'" /></td>' +
            '</tr>';
    $("#tableroom").append(strInner);

    loopbutton();
    intLine++;
    document.addform.hdnMaxLine.value = intLine;
}

function readdataroom(num)
{
    var arrayread = [];
    var buildid = document.getElementById('hdnbuildid').value;
    for(var i=0 ; i < intLine ; i++)
    {

        if (num != i){
            if ($('#hdnfilename'+i).val() == ''){
                var filename = pathimgdefault + 'show.png';
            }else {
                var filename = pathimgbuilding + '/' + buildid + "/" + $('#hdnfilename'+i).val();
            }
            var arrayadd = [$('#imageid'+i).val(), filename, $('#typeap_name'+i).val(), $('#typeap_size'+i).val(), $('#typeap_price'+i).val(), $('#hdnfilename'+i).val()];
            arrayread.push(arrayadd);
        }
    }
    arraydataimage = arrayread;
}

function RemoveRow(num, imageId)
{
    var strdefault = '<tr height="40" valign="bottom">'+
            '<td align="left" colspan="4" style="font-size:24px;" width="500">ประเภทห้องพัก</td>'+
            '<td align="center" width="100">ขนาด</td>'+
            '<td width="100">&nbsp;</td>'+
            '<td align="center" width="150">อัตราค่าเช่า / เดือน</td>'+
            '<td width="60">&nbsp;</td>'+
            '</tr>'

    deleteImage(num,imageId,'room');

    if(intLine > 1)
    {
        readdataroom(num);
        $("#tableroom").html(strdefault);
        intLine = 0;
        document.addform.hdnMaxLine.value = intLine;
        genrowimage();

    }
}

var intLineGal = {{gellerylines}};
var arraygalleryimage =
        [
            {% for gallerydata in galleries %}
            [{{gallerydata.id}}, "{{asset(gallerydata.link_photo)}}","{{gallerydata.photo_name}}","{{gallerydata.description}}"],
            {% endfor %}
        ];

var nullarrayGal = [-1, "{{asset('images/show.png')}}",'',''];
var pathimgdefault = "{{asset('images/')}}";

$(document).ready(function(){

    if(arraygalleryimage.length == 0)
    {
        CreateNewRowGallery(nullarrayGal, 0);
        arraygalleryimage = [nullarrayGal];
    }
    else{
        genrowimageGal();
    }
});

function genrowimageGal()
{
    $("#tbgal").html('');
    for(var i=0 ; i < arraygalleryimage.length ; i++)
    {
        CreateNewRowGallery(arraygalleryimage[i], i);
    }
}

function CreateNewRowGallery(arraydata, num)
{
    var imageid = arraydata[0];
    var pathimage = arraydata[1];
    var nameimage = arraydata[2];
    var description = arraydata[3];

    var strInner = '<tr>' +
            '<td><img src="{{asset('images/delete.png')}}" style="padding-left:0px; margin-left:-10px; cursor:pointer;" onclick="RemoveRowGal('+num+','+imageid+');" /></td>' +
            '<td><div id="gallerypic'+num+'" class="thumbframe4add"><img src="'+pathimage+'" class="nopad thumb4img"</div></td>' +
            '<td><input type="file" name="gallery'+num+'" id="gallery'+num+'" /><input type="hidden" name="hdngalleryname'+num+'" id="hdngalleryname'+num+'" value="'+nameimage+'" /></td>' +
            '<td><textarea id="galtitle'+num+'" name="galtitle'+num+'" maxlenght="500" placeholder="กรอกข้อมูลของรูปที่นี่" class="galdesc" onchange="postData('+"'"+"image"+"'"+');" >'+description+'</textarea><input type="hidden" name="imageidgal'+num+'" id="imageidgal'+num+'" value="'+imageid+'" /></td>' +
            '</tr>';
    $("#tbgal").append(strInner);

    loopbuttongallery();
    intLineGal++;
    document.addform.hdnMaxLineGal.value = intLineGal;
}

function readdatagallery(numGal)
{
    var arrayread = [];
    var buildid = document.getElementById('hdnbuildid').value;
    for(var i=0 ; i < intLineGal ; i++)
    {
        if (numGal != i){
            if ($('#hdngalleryname'+i).val() == ''){
                var filename = pathimgdefault + 'show.png';
            }else {
                var filename = pathimgbuilding + '/' + buildid + "/" + $('#hdngalleryname'+i).val();
            }
            var arrayadd = [$('#imageidgal'+i).val(), filename, $('#hdngalleryname'+i).val(), $('#galtitle'+i).val()];
            arrayread.push(arrayadd);
        }
    }
    arraygalleryimage = arrayread;
}

function RemoveRowGal(num, imageId)
{
    deleteImage(num,imageId,'gallery');
    if(intLineGal > 1)
    {
        readdatagallery(num);
        intLineGal = 0;
        document.addform.hdnMaxLineGal.value = intLineGal;
        genrowimageGal();

    }
}

function deleteImage(num,imageId,type)
{
    var buildid = document.getElementById('hdnbuildid').value;
    $.get("{{ path('setDeleteImage') }}" , { buildingId:buildid, sequence:num, id:imageId, type:type},
            function(data){
                //alert(data);
            });
}

function moveToDiv(id) {
    document.getElementById(id).scrollIntoView();
}

$(document).ready(function(){
    var provinceName = document.getElementById('hdnProvinceName').value;
    if(Trim(provinceName)=='กรุงเทพมหานคร')
    {
        var type = 0;
    }
    else
    {
        var type = 1;
    }
    fncAlert(type);
});

var imagepath = "{{asset('images/building')}}";

function postData(typesave)
{
    var type = typesave;
    var pathtosave = "{{path('autoSaveForm', {'id': build_id})}}";
    var addfixpath = pathtosave+'/'+type;

//    alert(type);

    $.post(addfixpath, $("#addform").serialize(),
            function(data) {
                var completetext = data;

//                alert(completetext);

                $.gritter.add({
                    // (string | mandatory) the heading of the notification
                    title: 'บันทึกข้อมูลสำเร็จ',
                    // (string | mandatory) the text inside the notification
                    text: 'ข้อมูลของท่านได้รับการบันทึกโดยอัตโนมัติ'
                });
            });
}

function fncAlert(type){
    if(type==0) {
        //$("#tbk").css("display","block");
        //$("#tcou").css("display","none");
        document.getElementById('bkzone_ot').disabled=false;
        document.getElementById('bts_ot').disabled=false;
        document.getElementById('mrt_ot').disabled=false;
        document.getElementById('univer_ot').disabled=false;
        //document.getElementById('near_ot').disabled=false;
        //document.getElementById('country_ot').disabled=true;
    }else if(type==1) {
        //$("#tbk").css("display","none");
        //$("#tcou").css("display","block");
        document.getElementById('bkzone_ot').disabled=true;
        document.getElementById('bts_ot').disabled=true;
        document.getElementById('mrt_ot').disabled=true;
        document.getElementById('univer_ot').disabled=true;
        //document.getElementById('near_ot').disabled=true;
        //document.getElementById('country_ot').disabled=false;
    }
}

function getAmphur()
{
    postData('head');

    var provinceName = document.getElementById('province').value;
    var pathtochange = "{{path('getDistrict')}}";
    var addfixpath = pathtochange+'/'+provinceName;
    var pathtochange2 = "{{path('getProvince')}}";
    var addfixpath2 = pathtochange2+'/'+provinceName;
    $.get(addfixpath2,
            function(data) {
                if(data != "no")
                {
                    document.getElementById('provinceChange').innerHTML = data;
                }
            });
    //document.getElementById('provinceChange').innerHTML = provinceName;

    if(Trim(provinceName)==1)
    {
        var type = 0;
    }
    else
    {
        var type = 1;
    }
    fncAlert(type);
    $.get(addfixpath,
            function(data) {
                if(data != "no")
                {
                    document.getElementById('divAmpher').innerHTML = data;
                }
            });
}

function LTrim(str){
    if (str==null){return null;}
    for(var i=0;str.charAt(i)==" ";i++);
    return str.substring(i,str.length
    );
}
function RTrim(str){
    if (str==null){return null;}
    for(var i=str.length-1;str.charAt(i)==" ";i--);
    return str.substring(0,i+1
    );
}
function Trim(str){return LTrim(RTrim(str));}

var arrLoopIn =
        [
            {% for loopin in fac_inroom_loop %}
            ['{{ loopin.id }}'],
            {% endfor %}
        ];
var arrLoopOut =
        [
            {% for loopout in fac_outroom_loop %}
            ['{{ loopout.id }}'],
            {% endfor %}

        ];
function checkAll(type)
{
    var facin = document.getElementById('facInAll').checked;
    var facout = document.getElementById('facOutAll').checked;
    if(type=='inRoom')
    {

        for(var i=0;i<arrLoopIn.length;i++)
        {
            var facId = arrLoopIn[i][0];
            if(facin)
            {
                $('input[id='+facId+']').attr('checked', true);
            }else if(!facin)
            {
                $('input[id='+facId+']').attr('checked', false);
            }
        }
    }else if(type=='outRoom')
    {
        for(var i=0;i<arrLoopOut.length;i++)
        {
            var facId = arrLoopOut[i][0];
            if(facout)
            {
                $('input[id='+facId+']').attr('checked', true);
            }else if(!facout)
            {
                $('input[id='+facId+']').attr('checked', false);
            }
        }
    }
    postData('other');
}

function checkSubmitData()
{
    var nameAp = document.getElementById('nameap').value;
    var placeAp = document.getElementById('placeap').value;
    var province = document.getElementById('province').value;
    var district = document.getElementById('district').value;
    var zipCode = document.getElementById('zipcode').value;
//        var longitude = document.getElementById('longitude').value;
//        var latitude = document.getElementById('latitude').value;
    var longitude = document.getElementById('longitude').value;
    var latitude = document.getElementById('latitude').value;
    var isNanLat = document.write
    var apType = document.getElementById('aptype').value;
    var telNumber = document.getElementById('telnumber').value;
    var time = document.getElementById('time').value;
    var contact_person = document.getElementById('contact_person').value;
    var water_price = document.getElementById('water_price').value;
    var contact_email = document.getElementById('contact_email').value;
    var power_price = document.getElementById('power_price').value;
    var pass ='';

    //ตรวจสอบการกรอกค่าตัวเลขของช่อง lat, long
    if(longitude != ""){
        if(parseFloat(longitude)){
            var resultLongtitude = longitude;
        } else {
            var resultLongtitude = null;
            alert('กรุณากรอกค่าลองติจูดเป็นตัวเลขค่ะ');
            return false;
        }
    }

    if(latitude != ""){
        if(parseFloat(latitude)){
            var resultLatitude = latitude;
        } else {
            var resultLatitude = null;
            alert('กรุณากรอกค่าละติจูดเป็นตัวเลขค่ะ');
            return false;
        }
    }

    //ตรวจสอบค่าว่างของตัวแปร
    if(nameAp==''||placeAp==''||zipCode==''||telNumber==''||time==''||contact_person==''||water_price==''||contact_email==''||power_price==''||province==0||district==0||apType==0) //longitude==''||latitude==''||
    {
        alert('ข้อมูลที่จำเป็นยังกรอกไม่ครบ กรุณาตรวจสอบข้อมูลด้วยค่ะ');
        if (nameAp=='') {
            document.getElementById('nameap').focus();
            $("#nameap").addClass("error");
        } else if (placeAp=='') {
            document.getElementById('placeap').focus();
            $("#placeap").addClass("error");
        } else if (province==0) {
            document.getElementById('province').focus();
            $("#province").addClass("error");
        } else if (district==0) {
            document.getElementById('district').focus();
            $("#district").addClass("error");
        } else if (zipCode=='') {
            document.getElementById('zipcode').focus();
            $("#zipcode").addClass("error");

        } else if( resultLatitude == null) {
            $("#latitude").addClass("error");

        } else if( resultLongtitude == null) {
            $("#longtitude").addClass("error");

//            } else if (longitude=='') {
//            	document.getElementById('longitude').focus();
//            } else if (latitude=='') {
//            	document.getElementById('latitude').focus();
        } else if (apType==0) {
            document.getElementById('aptype').focus();
            $("#aptype").addClass("error");
        } else if (telNumber=='') {
            document.getElementById('telnumber').focus();
            $("#telnumber").addClass("error");
        } else if (time=='') {
            document.getElementById('time').focus();
            $("#time").addClass("error");
        } else if (contact_person=='') {
            document.getElementById('contact_person').focus();
            $("#contact_person").addClass("error");
        } else if (water_price=='') {
            document.getElementById('water_price').focus();
            $("#water_price").addClass("error");
        } else if (contact_email=='') {
            document.getElementById('contact_email').focus();
            $("#contact_email").addClass("error");
        } else if (power_price=='') {
            document.getElementById('power_price').focus();
            $("#power_price").addClass("error");
        }
        return false;
    }
    else{
        if(confirm("ยืนยันการบันทึกข้อมูล")==true)
        {
            return true;
        }else{
            return false;
        }
    }
}

function getLastestNumberImage()
{
    var pathtoget = "{{path('getLastestNumberImage', {'id': build_id})}}";
    $.get(pathtoget,
            function(data) {
                document.addform.hdnImageNumber.value = data;

            });
}
</script>
<style>
    .error{
        background-color: #FFBBBB;
    }
</style>

{% if username is not null %}

<form name="addform" id="addform" method="post" action="{{path('saveData', {'id': build_id })}}" onsubmit="javascript:return checkSubmitData();">
<div id="device" style="height: 200px; margin-bottom: 15px;display: none;">
    <div style="display: block; position: relative; width:1000px; color:#FFF; font-size:36px; text-align: center; padding-top:50px;">
        ข้อความ
        <a class="back" href="{{path('userbuilding')}}"></a> <a class="data" href="{{path('userbuilding')}}"></a>
    </div>
</div>
<div id="fix">
    <!--<input class="upimg" type="submit" value="" />-->
    <input class="save" type="submit" value="" />
    <!--<input class="back" type="submit" value="" />-->
    {#<a class="back" href="{{path('userbuilding')}}"></a>#}
        <a class="data" onclick="moveToDiv('datazone');"></a>
    <a class="room" onclick="moveToDiv('roomzone');"></a>
    <a class="gallery" onclick="moveToDiv('galleryzone');"></a>
    <a class="etc" onclick="moveToDiv('etczone');"></a>
    <!--<input class="data" type="button" value="" onclick="javascript:focusDataZone();" />
<input class="room" type="button" value="" onclick="document.getElementById('room').focus();" />
<input class="gallery" type="button" value="" onclick="document.getElementById('gallery').focus();" />
<input class="etc" type="button" value="" onclick="document.getElementById('etc').focus();" />-->
</div>



<div id="datazone" class="detail" style="height: 780px; margin-bottom: 15px;">
    <img src="{{asset('images/apdata.png')}}" style="display:block; position:relative; float:none;" />
    <hr class="line" style="top: 60px;" />
    <div style="width:1000px; display:block; position:relative; height:245px; margin-top: 20px;">
        <table style="margin-top: 0px; float:left;">
            <tr height="50" valign="middle">
                <td align="left" width="240">
                    <div id="headimage" class="thumbframe4add">
                        {% if linkimagehead != '' %}
                        <img src="{{asset(linkimagehead)}}" class="nopad thumb" />
                        {% else %}
                        <img src="{{asset('images/ex.png')}}" class="nopad thumb" />
                        {% endif %}
                    </div>
                </td>
                <td align="left" width="210" valign="middle"><input style="margin-left: -20px;" type="file" name="file_upload" id="file_upload" />
                    <input type="hidden" name="hdnfilename" id="hdnfilename" value="{{nameimagehead}}" /></td>
            </tr>
            <tr height="50" valign="middle">
                &nbsp;
            </tr>
        </table>

        <table style="margin-top: -15px; float:none;  margin-left: 0px;">
            <tr height="50" valign="middle">
                <td align="right" width="210" style="font-size:24px;">ชื่อหอพัก / อพาร์ทเม้นท์ : *</td>
                <td align="left" width="190"><input name="nameap" id="nameap" type="text" maxlength="30" placeholder="กรุณากรอกชื่อหอพัก" style=" padding:2px; font-size:20px;" value="{{buildingdata.sbuildingname}}" onchange="postData('head');" /></td>
            </tr>
            <tr height="50" valign="top">
                <td align="right" width="210" style="font-size:24px;">ที่อยู่ : *</td>
                <td align="left" width="190"><textarea name="placeap" id="placeap" type="text" maxlength="500" class="place"  onchange="postData('head');" />{{buildingdata.tbuildingaddress}}</textarea></td>
            </tr>
            <tr height="50" valign="middle">
                <td align="right" width="210" style="font-size:24px;">จังหวัด : *</td>
                <td align="left" width="190">
                    <div class="styled-select">

                        <select id="province" name="province" class="select" onchange="getAmphur();" class="error">

                            {% for list in province %}
                                {#{% if list.checked == 'no' %}#}
                                {#<option value="{{list.PROVINCE_ID}}">{{list.PROVINCE_NAME}}</option>#}
                                {#{% else %}#}
                                {#<option value="{{list.PROVINCE_ID}}" selected="selected">{{list.PROVINCE_NAME}}</option>#}
                                {#{% endif %}#}

                                {#แก้ไขให้ focus จังหวัดที่เลือกได้ถูกต้อง#}
                                {#MICK#}
                                {#2013/03/22#}
                                {% if list.PROVINCE_ID == building_province %}
                                    <option value="{{list.PROVINCE_ID}}" selected="selected">{{list.PROVINCE_NAME}}</option>
                                {% else %}
                                    <option value="{{list.PROVINCE_ID}}">{{list.PROVINCE_NAME}}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </td>
            </tr>
            <tr height="40" valign="middle">
                <td align="right" width="210" style="font-size:24px;">เขต/อำเภอ : *</td>
                <td align="left" width="190">
                    <span id="divAmpher">
                        <div class="styled-select">
                            <select id="district" name="district" class="select" onchange="postData('head');">
                                {% for list in district %}
                                {% if list.checked == 'no' %}
                                <option value="{{list.AMPHUR_ID}}">{{list.AMPHUR_NAME}}</option>
                                {% else %}
                                <option value="{{list.AMPHUR_ID}}" selected="selected">{{list.AMPHUR_NAME}}</option>
                                {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    </span>
                </td>
            </tr>
            <tr height="50" valign="middle">
                <td align="right" width="210" style="font-size:24px;">รหัสไปรษณีย์ : *</td>
                <td align="left" width="190"><input id="zipcode" name="zipcode" type="text" maxlength="30" placeholder="กรุณากรอกรหัสไปรษณีย์" style=" padding:2px; font-size:20px;" value="{{buildingdata.saddrzipcode}}" onchange="postData('head');" /></td>
            </tr>
        </table>
        <table style="margin-top: 0px; float:left;">
            <tr>
                <td align="right" width="240" style="font-size:24px;">
                    <div id="headimage2" class="thumbframe4add" style="margin-top:-80px;">
                        {% if linkimagemap != '' %}
                        <img src="{{asset(linkimagemap)}}" class="nopad thumb" />
                        {% else %}
                        <img src="{{asset('images/exmap.png')}}" class="nopad thumb" />
                        {% endif %}
                    </div></td>
                <td align="left" width="180">
                    <input type="file" name="upload_map" id="upload_map"/>
                    <input type="hidden" name="hdnfilemap" id="hdnfilemap" value="{{nameimagemap}}" />
                </td>
                <td align="right" width="240" valign="top" style="font-size:24px;">รายละเอียดเพิ่มเติม : &nbsp;</td>
                <td align="left" width="200"><textarea id="placedetail" name="placedetail" type="text" maxlength="500" class="ldesc" onchange="postData('head');" />{{buildingdata.tdetail}}</textarea></td>
            </tr>
        </table>
    </div>
    <div style="width:1000px; display:block; position:relative; height:240px; margin-top: 115px;">
        <table style="margin-top: 0px;">
            <tr height="50" valign="middle">
                <td align="right" width="240" style="font-size:24px;">Google Map ลองติจูด : </td>
                <td align="left" width="200"><input id="longitude" name="longitude" type="text" maxlength="30" placeholder="กรุณากรอกตำแหน่งลองติจูด" style=" padding:2px; font-size:20px;" value="{{buildingdata.slongitude}}" onchange="postData('head');" /></td>
                <td align="right" width="240" style="font-size:24px;">Google Map ละติจูด : </td>
                <td align="left" width="200"><input id="latitude" name="latitude" type="text" maxlength="30" placeholder="กรุณากรอกตำแหน่งละติจูด" style=" padding:2px; font-size:20px;" value="{{buildingdata.slatitude}}" onchange="postData('head');" /></td>
                <td align="left" width="30" style="font-size:24px;">&nbsp;</td>
            </tr>
            <tr height="50" valign="middle">
                <td align="right" width="240" style="font-size:24px;">ประเภทหอพัก : *</td>
                <td align="left" width="200">
                    <div class="styled-select">
                        <select id="aptype" name="aptype" class="select" onchange="postData('head');">
                            {#{% for list in buildingType %}#}
                            {#{% if list.checked == 'no' %}#}
                            {#<option value="{{list.id}}">{{list.type_name}}</option>#}
                            {#{% else %}#}
                            {#<option value="{{list.id}}" selected="selected">{{list.type_name}}</option>#}
                            {#{% endif %}#}
                            {#{% endfor %}#}

                            {#แสดงผล selected เมื่อ id ของจังหวัดตรงกัน#}
                            {#MICK#}
                            {#2013/03/22#}
                            {% for list in buildingType %}
                                {% if list.id == building_type %}
                                    <option value="{{list.id}}" selected="selected">{{list.type_name}}</option>
                                {% else %}
                                    <option value="{{list.id}}">{{list.type_name}}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </td>
                <td align="right" width="210" style="font-size:24px;">ชนิด : *</td>
                <td align="left" width="190" style="font-size:24px;">
                    <div class="styled-select">
                        <select id="paytype" name="paytype" class="select" onchange="postData('head');">
                            {#{% for list in payType %}#}
                            {#{% if list.checked == 'no' %}#}
                            {#<option value="{{list.id}}">{{list.typename}}</option>#}
                            {#{% else %}#}
                            {#<option value="{{list.id}}" selected="selected">{{list.typename}}</option>#}
                            {#{% endif %}#}
                            {#{% endfor %}#}

                            {#แสดงผล selected เมื่อ id ของชนิดห้องพักตรงกัน#}
                            {#MICK#}
                            {#2013/03/22#}
                            {% for list in payType %}
                                {% if list.id == building_pay_type %}
                                    <option value="{{list.id}}" selected="selected">{{list.typename}}</option>
                                {% else %}
                                <option value="{{list.id}}">{{list.typename}}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div></td>
                <td align="left" width="30" style="font-size:24px;">&nbsp;</td>
            </tr>
            <tr height="50" valign="middle">
                <td align="right" width="240" style="font-size:24px;">เบอร์โทรติดต่อ : *</td>
                <td align="left" width="200"><input id="telnumber" name="telnumber" type="text" maxlength="15" placeholder="กรุณากรอกเบอร์โทรติดต่อ" style=" padding:2px; font-size:20px;" value="{{buildingdata.sphonenumber}}" onchange="postData('head');" /></td>
                <td align="right" width="210" style="font-size:24px;">ระยะเวลาเช่าขั้นต่ำ : *</td>
                <td align="left" width="190"><input id="time" name="time" type="text" maxlength="3" placeholder="กรุณากรอกระยะเวลาเช่าขั้นต่ำ" style=" padding:2px; font-size:20px;" value="{{buildingdata.smonthstay}}" onchange="postData('head');" /></td>
                <td align="left" width="30" style="font-size:24px;"> เดือน</td>
            </tr>
            <tr height="50" valign="middle">
                <td align="right" width="240" style="font-size:24px;">ติดต่อคุณ : *</td>
                <td align="left" width="200"><input id="contact_person" name="contact_person" type="text" placeholder="กรุณากรอกชื่อผ้ติดต่อ" style=" padding:2px; font-size:20px;" value="{{buildingdata.scontactname}}" onchange="postData('head');" /></td>
                <td align="right" width="210" style="font-size:24px;">ค่าน้ำ : *</td>
                <td align="left" width="190"><input id="water_price" name="water_price" type="text" maxlength="5" placeholder="กรุณากรอกค่าน้ำ" style=" padding:2px; font-size:20px;" value="{{buildingdata.fwaterunit}}" onchange="postData('head');" /></td>
                <td align="left" width="30" style="font-size:24px;"> บาท</td>
            </tr>
            <tr height="50" valign="middle">
                <td align="right" width="240" style="font-size:24px;">อีเมล : *</td>
                <td align="left" width="200"><input id="contact_email" name="contact_email" type="text" placeholder="กรุณากรอกอีเมล" style=" padding:2px; font-size:20px;" value="{{buildingdata.scontactemail}}" onchange="postData('head');" /></td>
                <td align="right" width="210" style="font-size:24px;">ค่าไฟ : *</td>
                <td align="left" width="190"><input id="power_price" name="power_price" type="text" maxlength="5" placeholder="กรุณากรอกค่าไฟ" style=" padding:2px; font-size:20px;" value="{{buildingdata.felectrictunit}}" onchange="postData('head');" /></td>
                <td align="left" width="30" style="font-size:24px;"> บาท</td>
            </tr>
            <tr height="50" valign="middle">
                <td align="right" width="240" style="font-size:24px;">เว็บไซต์ : &nbsp;</td>
                <td align="left" width="200"><input id="website" name="website" type="text" placeholder="กรุณากรอกเว็บไซต์" style=" padding:2px; font-size:20px;" value="{{buildingdata.swebsite}}" onchange="postData('head');" /></td>
                <td align="right" width="210" style="font-size:24px;">ค่าอินเตอร์เน็ต : &nbsp;</td>
                <td align="left" width="190"><input id="internet_price" name="internet_price" type="text" maxlength="5" placeholder="กรุณากรอกค่าอินเตอร์เน็ต" style=" padding:2px; font-size:20px;" value="{{buildingdata.iinternetprice}}" onchange="postData('head');" /></td>
                <td align="left" width="30" style="font-size:24px;"> บาท</td>
            </tr>
        </table>
    </div>
</div>

<div id="roomzone" class="detail" style="height: 100%; margin-bottom: 15px;">
    <img src="{{asset('images/roomap.png')}}" style="display:block; position:relative; float:none;" />
    <hr class="line" style="top: 60px;" />
    <div>
        <table id="tableroom">
            <tr height="40" valign="bottom">
                <td align="left" colspan="4" style="font-size:24px;" width="500">ประเภทห้องพัก</td>
                <td align="center" width="100">ขนาด</td>
                <td width="100">&nbsp;</td>
                <td align="center" width="150">อัตราค่าเช่า / เดือน</td>
                <td width="60">&nbsp;</td>
            </tr>
        </table>
        <img src="{{asset('images/addmore2.png')}}" class="nopad" onclick="CreateNewRow(nullarray, intLine);" style="margin-left: 130px;margin-bottom: 20px; cursor: pointer;">
        <input type="hidden" id="hdnMaxLine" name="hdnMaxLine" value="{{roomlines}}">
    </div>
</div>

<div id="galleryzone" class="detail" style="height: 100%; margin-bottom: 15px;">
    <img src="{{asset('images/gallery.png')}}" style="display:block; position:relative; float:none;" />
    <hr class="line" style="top: 60px;" />
    <div>
        <table id="tbgal">

        </table>
        <img src="{{asset('images/addmore2.png')}}" class="nopad" onclick="CreateNewRowGallery(nullarrayGal, intLineGal);" style="margin-left: 130px;margin-bottom: 20px; cursor: pointer;">
        <input type="hidden" id="hdnMaxLineGal" name="hdnMaxLineGal" value="{{gellerylines}}">
    </div>
</div>

<input type="hidden" name="hdnownername" id="hdnownername" value="{{username}}" />
<input type="hidden" name="hdnbuildid" id="hdnbuildid" value="{{build_id}}" />
<div id="etczone" class="detail" style="height: auto; margin-bottom: 15px;">

    <img src="{{asset('images/etc.png')}}" style="display:block; position:relative; float:none;" />
    <hr class="line" style="top: 60px;" />
    <div style="display:block;padding-bottom:10px;">
        <table>
            <tr height="50" valign="middle">
                <td align="left" width="165">จังหวัด :</td>
                <td>
                    <div id="provinceChange">
                        {% if provinceName != NULL %}
                        {{ provinceName }}
                        {% else %}
                        โปรดเลือกจังหวัดที่ส่วนข้อมูลหอพักก่อน
                        {% endif %}
                    </div>
                </td>
                <input id="hdnProvinceName" name="hdnProvinceName" type="hidden" value="{{provinceName}}" />
                <input type="hidden" name="hdnImageNumber" id="hdnImageNumber" value="{{maximagenumber}}" />
            </tr>
        </table>

        <table id="tbk" style="margin-top:0px; border-right:1px solid #fff; float:left;">
            <tr height="50" valign="middle">
                <td align="left" width="165">โซนในกรุงเทพฯ :</td>
                <td width="250">
                    <div class="styled-select">

                        <select id="bkzone_ot" name="bkzone_ot" class="select" onchange="postData('other');">
                            {% for zlist in zonelist %}
                            <option value="{{ zlist.id }}" >{{ zlist.zonename }}</option>
                            {% endfor %}
                        </select>

                    </div>
                </td>
            </tr>
            <tr height="50" valign="middle">
                <td align="left" width="145">ใกล้รถไฟฟ้า BTS :</td>
                <td width="250">
                    <div class="styled-select">

                        <select id="bts_ot" name="bts_ot" class="select" onchange="postData('other');">
                            {% for btslist in nearBTS %}
                            <option value="{{ btslist.id }}" {% if btslist.checked =='yes'%}  selected="selected"{% endif %}>{{ btslist.name }}</option>
                            {% endfor %}
                        </select>

                    </div>
                </td>
            </tr>
            <tr height="50" valign="middle">
                <td align="left" width="145">ใกล้รถไฟฟ้า MRT :</td>
                <td width="250">
                    <div class="styled-select">

                        <select id="mrt_ot" name="mrt_ot" class="select" onchange="postData('other');">
                            {% for mrtlist in nearMRT %}
                            <option value="{{ mrtlist.id }}" {% if mrtlist.checked =='yes'%}  selected="selected"{% endif %}>{{ mrtlist.name }}</option>
                            {% endfor %}
                        </select>

                    </div>
                </td>
            </tr>
            <tr height="50" valign="middle">
                <td align="left" width="165">ใกล้มหาวิทยาลัย :</td>
                <td width="250">
                    <div class="styled-select">

                        <select id="univer_ot" name="univer_ot" class="select" onchange="postData('other');">
                            {% for ulist in nearUniversity %}
                            <option value="{{ ulist.id }}" {% if ulist.checked =='yes'%}  selected="selected"{% endif %}>{{ ulist.name }}</option>
                            {% endfor %}
                        </select>

                    </div>
                </td>
            </tr>
        </table>

        <table id="tcou" style="margin-top:0px; display:block; height:200px; margin-top: 15px;">
            <tr valign="top">
                <td id="fie" align="left" width="165" style="padding-left:50px">ตามสถานที่ใกล้เคียง :</td>
                <td width="300">
                    <input id="near_ot" name="near_ot" type="text" value="{{buildingdata.snearlyplace}}" onchange="postData('other');" placeholder="กรุณากรอกสถานที่ใกล้เคียง" style=" padding:2px; font-size:20px; margin-top:-4px;"/>
                </td>
                <td colspan="2"></td>
            </tr>
        </table>
    </div>
    <hr class="line" />
    <div style="margin-top:30px;">
        <table>
            <tr>
                <td colspan="3" style="padding-bottom:5px;">
                    สิ่งอำนวยความสะดวกในห้อง :
                </td>
                <td align="center">
                    <input id="facInAll" name="facInAll" type="checkbox" onclick="checkAll('inRoom');" /><label for="facInAll">เลือกทั้งหมด</label>
                </td>
            </tr>
            {% for list in fac_inroom %}
            <tr height="40" valign="middle">
                {% for loops in list.loop %}
                <td width="250">
                    <input id="fac{{loops.id}}" name="fac[]" type="checkbox"
                            {% if loops.checked == 'yes' %}
                           checked ="checked"
                            {% endif %}
                           value="{{loops.value}}" onchange="postData('other');"
                            /> <label for="fac{{loops.id}}">{{loops.facility_name}}</label>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
    </div>
    <hr class="line" />
    <div style="margin-top:30px;">
        <table>
            <tr>
                <td colspan="3" style="padding-bottom:5px;">
                    สิ่งอำนวยความสะดวกในอาคารและใกล้เคียงอาคาร :
                </td>
                <td align="center">
                    <input id="facOutAll" name="facOutAll" type="checkbox" onclick="checkAll('outRoom');" /><label for="facOutAll">เลือกทั้งหมด</label>
                </td>
            </tr>
            {% for list in fac_outroom %}
            <tr height="40" valign="middle">
                {% for loops in list.loop %}
                <td width="250">
                    <input id="fac{{loops.id}}" name="fac[]" type="checkbox"
                            {% if loops.checked == 'yes' %}
                           checked ="checked"
                            {% endif %}
                           value="{{loops.value}}" onchange="postData('other');"
                            /> <label for="fac{{loops.id}}">{{loops.facility_name}}</label>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
            {#<tr>#}
                    {#<td colspan="3"></td>#}
                    {#<td><input class="save" type="submit" value="" /> <input class="back" type="button" value="" onclick="window.location='{{path('userbuilding')}}'" /></td>#}
                {#</tr>#}
            </table>
    </div>
    <div style="height: 50px;">&nbsp;</div>
</div>
</form>

{% else %}

<div class="detail" style="">
    <H1 class="pdL10 fontRed">กรุณายืนยันการแก้ไขประกาศ</H1>
    <p class="pdL10 fontWhite">กรุณากรอก Email ที่ท่านใช่เพิ่มห้องพัก, และกรุณากรอก password ที่ท่านได้รับใน Email ของท่าน</p>
</div>

{% endif %}



{% endblock %}